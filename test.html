<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">

  <!-- подключаем стили Mocha, для отображения результатов -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mocha/2.1.0/mocha.css">
  <link rel="stylesheet" href="test.css"> 
  <title>Tests | Intersections in JS</title>
  <!-- подключаем библиотеку Mocha -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/2.1.0/mocha.js"></script>
  <!-- настраиваем Mocha: предстоит BDD-тестирование -->
  <script>
    mocha.setup('bdd');
  </script>

  <!-- подключаем chai -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chai/2.0.0/chai.js"></script>
  <!-- в chai есть много всего, выносим assert в глобальную область -->
  <script>
    var assert = chai.assert;
  </script>
</head>

<body>

  <!-- тестируемый скрипт с функциями -->
  <script src="solution.js"></script>

  <!-- в этом скрипте находятся спеки -->
  <script src="test.js"></script>

  
  <div class="container">
    <svg class="base"></svg>
    <svg class="intersections"></svg>
  </div>

  <script>

    var figs = [[{"x":79,"y":198},{"x":38,"y":262},{"x":16,"y":308},{"x":73,"y":323},{"x":226,"y":220}],[{"x":324,"y":239},{"x":373,"y":96},{"x":278,"y":333},{"x":19,"y":54},{"x":96,"y":365}]]

    var fig1 = figs[0];
    var fig2 = figs[1];

    function drawPath(data, container, color) {
      var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      var str = 'M' + data[0].x + ',' + data[0].y+' ';
      str += data.slice(1).map(function (point) {
        return 'L' + point.x + ',' + point.y;
      }).join(' ');
      str += 'L' + data[0].x + ',' + data[0].y+' ';
      path.setAttribute('d', str);
      path.style.fill = color;
      container.appendChild(path);
    }

    drawPath(fig1, document.querySelector('svg.base'), 'navy');
    drawPath(fig2, document.querySelector('svg.base'), 'yellow');

    intersects(fig1, fig2).forEach(function (p) {
      drawPath(p, document.querySelector('svg.intersections'), 'red');
    });
  </script>
  

  <!-- в элементе с id="mocha" будут результаты тестов -->
  <div id="mocha"></div>

  <!-- запустить тесты! -->
  <script>
    mocha.run();
  </script>
</body>

</html>